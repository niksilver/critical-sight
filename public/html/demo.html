<html>
<!--  from http://htmlcheats.com/fabric-js/fabric-js-tutorial-a-complete-fabric-js-example-beginners-2013/ -->
<head>
<meta charset="utf-8">
<title>fabric.js-simple text display</title>

<!-- Get Fabric.js from CDN -->
<script
	src="http://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.4.0/fabric.min.js"></script>

<!-- Get the jQuery from CDN. Required for ready() function. -->
<script src="http://code.jquery.com/jquery-2.1.3.js"></script>

</head>
<body>

	<canvas id="c" style="border: 1px solid black;"></canvas>

</body>
<script>

	var Sizer = function(unitHeight, unitWidth) {
		this.topPadding = unitHeight * 0.5;
		this.height = unitHeight;
		this.midPadding = unitHeight * 0.5;
		this.unitWidth = unitWidth;
		
		/**
		 * Top of a task rectangle, where the task is index `idx`.
		 */
		this.top = function(idx) {
			return (this.height + this.midPadding) * idx + this.topPadding;
	    }

		/**
		 * Left of a task rectangle, where the start is at time `start`.
		 */
	    this.left = function(start) { return start * this.unitWidth; }
			
		/**
		 * Width of a task rectangle, where the task's duration is `dur`.
		 */
	    this.width = function(dur) { return dur * this.unitWidth; }
	}
	
	var TaskMaker = function(sizer) {
		this.sizer = sizer;
		this.taskRect = function(idx, start, duration) {
			return new fabric.Rect({
				originX: 'left',
				originY: 'top',
				left:   sizer.left(start),
				top:    sizer.top(idx),
				height: sizer.height,
				width:  sizer.width(duration),
				fill: 'rgb(255,0,0)'
			});
		}
	}

	$(function() {
		
		var htmlCanvas = document.getElementById('c');
		htmlCanvas.width = 1000;
		htmlCanvas.height = 500;
		
		var canvas = new fabric.Canvas("c");

		// This next option from http://fabricjs.com/customization/
		// hi.selectable = false;

		var sizer = new Sizer(20, 50);
		var tMaker = new TaskMaker(sizer);
		
		for (var i = 0; i < 10; i++) {
			var start = i;
			var duration = i+2;
			var rect = tMaker.taskRect(i, start, duration);
			canvas.add(rect);
		}

	});
</script>
</html>
